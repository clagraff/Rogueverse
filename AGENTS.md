# Agent Guidelines for rogueverse

## Build & Test Commands
- `flutter run` - Run the app
- `flutter test` - Run all tests
- `flutter test test/widget_test.dart` - Run a single test file
- `flutter analyze` - Lint the codebase
- `dart run build_runner build` - Generate mapper files for dart_mappable
- `dart tools/barrel_generator.dart` - Generate barrel exports

The app should NEVER be ran (`flutter run`) without explicit instructions to
do so. 
Prefer `flutter analyze` or `flutter build` over `flutter run` in almost all cases.

For `flutter analyze`, prefer running it over the specific files changed (if any)
instead of the whole project for speed & efficiency.

## Code Style

### Imports
- Use `package:rogueverse/` for all internal imports (never relative imports)
- Group imports: dart, flutter/flame, packages, project (separated by blank lines)
- Use barrel files (`.barrel.dart`) when importing from directories
- Hide conflicting imports explicitly (e.g., `import 'package:flame/components.dart' hide World;`)

### Formatting & Structure
- Use `flutter_lints` rules (configured in `analysis_options.yaml`)
- Generated files: `*.mapper.dart`, `*.init.dart` (auto-generated by dart_mappable via build_runner)
- Barrel files: `*.barrel.dart` (generated by `tools/barrel_generator.dart`)

### Types & Annotations
- All components must use `@MappableClass()` annotation and implement `Component` interface
- Components must define `String get componentType` getter returning their type name
- Use `part 'filename.mapper.dart';` for files with `@MappableClass()` annotations
- Prefer explicit types over `var` for public APIs

### Naming Conventions
- Classes: PascalCase (e.g., `LocalPosition`, `MoveByIntent`)
- Files: snake_case matching class name (e.g., `components.dart`, `game_area.dart`)
- Private fields: prefix with underscore (e.g., `_templateEditingWorld`)

### Error Handling
- Use exceptions for invalid state (e.g., `throw Exception("message")`)
- Add TODO comments for future improvements
- Use logging package for runtime logging: `Logger("ClassName").info("message")`
